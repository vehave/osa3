(this.webpackJsonposa2_puhelinluettelo=this.webpackJsonposa2_puhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),l=n(13),r=n.n(l),c=(n(19),n(2)),u=n(3),i=n.n(u),s="/api/persons",d=function(){return i.a.get(s).then((function(e){return e.data}))},m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},f=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"green",border:"solid"}},t)},g=function(e){var t=e.message;return null===t?null:a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"red",border:"solid"}},t)},v=function(e){var t=e.person,n=e.deletePerson;return a.a.createElement("div",null,t.name," ",t.number,a.a.createElement("button",{style:{backgroundColor:"pink",color:"white",border:"solid"},onClick:n},"delete"))},w=function(e){return a.a.createElement("div",null,e.text,a.a.createElement("input",{style:{backgroundColor:"white",color:"blue",border:"solid"},onChange:e.onChange,type:"text",value:e.value}))},E=function(e){return a.a.createElement("div",null,a.a.createElement("form",{onSubmit:e.onSubmit},a.a.createElement("div",null,e.text1,a.a.createElement("input",{style:{backgroundColor:"white",color:"blue",border:"solid"},value:e.value1,onChange:e.onChange1})),a.a.createElement("div",null,e.text2,a.a.createElement("input",{style:{backgroundColor:"white",color:"blue",border:"solid"},value:e.value2,onChange:e.onChange2})),a.a.createElement("div",null,a.a.createElement("button",{style:{backgroundColor:"pink",color:"white",border:"solid"},type:"submit"},e.text3))))},p=function(){var e=Object(o.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1],r=Object(o.useState)(""),u=Object(c.a)(r,2),i=u[0],s=u[1],p=Object(o.useState)(""),k=Object(c.a)(p,2),C=k[0],y=k[1],j=Object(o.useState)(!0),O=Object(c.a)(j,2),S=O[0],x=O[1],T=Object(o.useState)(""),D=Object(c.a)(T,2),P=D[0],A=D[1],B=Object(o.useState)(null),I=Object(c.a)(B,2),J=I[0],W=I[1],_=Object(o.useState)(null),F=Object(c.a)(_,2),M=F[0],N=F[1],$=S?n:n.filter((function(e){return e.name.includes(P)}));Object(o.useEffect)((function(){d().then((function(e){l(e)}))}),[]),console.log("render",n.length,"persons");return a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"white",class:"w3-container"}},a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"white",class:"w3-content"}},a.a.createElement(f,{message:M}),a.a.createElement(g,{message:J}),a.a.createElement("h2",null,"Phonebook"),a.a.createElement(w,{onChange:function(e){x(!1),console.log(e.target.value),A(e.target.value)},value:P,text:"Filter to show with"})),a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"white",class:"w3-content"}},a.a.createElement("h2",null,"Add a new"),a.a.createElement(E,{onSubmit:function(e){e.preventDefault();for(var t={name:i,number:C},o=!1,a=-100,r=0;r<n.length;r++)if(n[r].name===i){o=!0,a=n[r].id;break}!0===o?window.confirm("".concat(i," is already added to phonebook, replace the old number with the new one"))&&h(a,t).then((function(e){l(n.map((function(t){return t.id!==a?t:e}))),N("The old number of ".concat(i," has replaced with the new one")),setTimeout((function(){N(null)}),3e3),s(""),y("")})).catch((function(e){W("Information of ".concat(i," has already removed from server")),setTimeout((function(){W(null)}),3e3),l(n.filter((function(e){return e.id!==a})))})):m(t).then((function(e){l(n.concat(e)),N("Added ".concat(i)),setTimeout((function(){N(null)}),3e3),s(""),y("")})).catch((function(e){W(e.response.data.error),console.log(J),setTimeout((function(){W(null)}),3e3)}))},text1:"name:",value1:i,onChange1:function(e){console.log(e.target.value),s(e.target.value)},text2:"number:",value2:C,onChange2:function(e){console.log(e.target.value),y(e.target.value)},text3:"add"})),a.a.createElement("div",{style:{backgroundColor:"lightblue",color:"white",class:"w3-content"}},a.a.createElement("h2",null,"Numbers"),$.map((function(e){return a.a.createElement(v,{key:e.id,person:e,deletePerson:function(){return function(e){var t=e.id;window.confirm("Delete ".concat(e.name,"?"))&&b(t).then((function(o){console.log(o);var a=n.filter((function(e){return e.id!==t}));l(a),N("Deleted ".concat(e.name)),setTimeout((function(){N(null)}),3e3)}))}(e)}})}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.f8d8d79b.chunk.js.map